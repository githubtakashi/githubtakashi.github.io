## c++の基礎などメモ

c++の基礎などメモしていきます。

日本語ドキュメントがわかりやすい。

- [C++日本語ドキュメント](https://cpprefjp.github.io/)

<br />

### 関数のdefault宣言｜delete宣言

クラスを定義したときに下記メンバ関数が暗黙的(自動的)に定義される。

デフォルトコンストラクタ.  
コピーコンストラクタ.  
ムーブコンストラクタ.  
コピー代入演算子.  
ムーブ代入演算子.  
デストラクタ.  

通常だと暗黙的に定義されるものをdefault宣言、delete宣言することで暗黙的な定義に対して挙動を変えることができるイメージ。

default宣言、delete宣言を理解する前に上記に挙げたコンストラクタ類についてどんなものかを理解しておく必要がある。

<br />

#### コピーコンストラクタ

- コンストラクタとは.   
オブジェクトが生成される時に呼び出される、オブジェクトを初期化するためのメンバ関数。

コピーコンストラクタとは、例えば同じクラスのブループリントからオブジェクトを２個生成し、  
コンストラクタでオブジェクトを初期化したオブジェクトの値を使ってもう１個のオブジェクトにコピーする(仕組み・挙動の)こと。

このように、同じクラスのオブジェクトを使って初期化する時にコピーコンストラクタが使われる。

下記のサンプルコードではmain()関数の中でコピーコンストラクタによって暗黙的にposAの値がコピーされて　　
posBにセット(代入)される。

コピーコンストラクタを定義していない場合は自動的に定義が行われクラスのメンバ変数の値がそのままコピーされることになる。

下記サンプルの場合は、posBのコンストラクタはposAのZZZ posA(29, 30)のように定義していないので、ZZZ posB = posA;によって　　
クラスのメンバ変数であるposAの値がそのままコピーされることになる。

```
#include <stdio.h>

class ZZZ
{
public:
    int x;
    int y;

    ZZZ(int tmpx, int tmpy); // クラスZZZのコンストラクタ
};

//  引数付きのコンストラクタ
ZZZ::ZZZ(int tmpx, int tmpy) // <基底クラス名>::<コンストラクタ名>()
{
    x = tmpx;
    y = tmpy;
}

int main()
{
    ZZZ posA(29, 30); //  posAに対するコンストラクタ呼び出し

    ZZZ posB = posA;    //  posBに対するコピーコンストラクタ呼び出し

    printf("posB.x:%d posB.y:%d", posB.x, posB.y); // posB.x:29 posB.y:30

    return 0;
}
```

<br />

##### コピーコンストラクタの定義方法

下記サンプルコードではコピーコンストラクタの定義をすることでコピーコンストラクタの挙動を任意の動きに操作している。　

- コピーコンストラクタの書式　　

<クラス名>::<コンストラクタ名>(const <クラス名>& <オブジェクト名>){<コピー処理の内容>}

引数にconst修飾したクラスの参照型のオブジェクトを渡す。　　
言い換えると、参照しにいくクラスをconst修飾し、そのconst修飾したクラスをもとにオブジェクトを生成しそのオブジェクトを　　
引数とする。




```
class ZZZ
{
public:
    int x;
    int y;

    ZZZ(int tmpx, int tmpy);
    ZZZ(const ZZZ & pos);   //  コピーコンストラクタ
};

//  引数付きのコンストラクタ
ZZZ::ZZZ(int tmpx, int tmpy)
{
    x = tmpx;
    y = tmpy;
}

//  コピーコンストラクタの定義
ZZZ::ZZZ(const ZZZ & pos)
{
    x = pos.x;
    y = pos.y;
}```
