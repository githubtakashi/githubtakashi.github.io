# cmakeのメモ

c++のコードをvimで作成し実行ファイルを作成するにあたってcmakeを使えるようにしていく。

ファイル数個だったら自分でコンパイルしリンクして実行ファイルを作成するのは手間はそれほど
かからないけど、それ以上に増えてくると、cmakeを使うことで作業が楽になる。

CMakeLists.txt

に設定を書くことでmakefileやプロジェクトファイルを生成してくれる。

makefileに設定を書いてmakeにそれを解釈させる方法よりもcmakeの方が簡単とのこと。

- CMakeLists.txtに下記を記載する。ファイルはプロジェクトファイルのあるディレクトリに作成する。

```
project(hello)
add_executable(hello hello.cpp)
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wall")
```

project文はプロジェクトの名前にする。visual C++におけるソリューション名。
ここはあんまり気にしなくてよいみたい。

add_executable()の第一引数は実行ファイルの名前、第二引数はコンパイル対象のファイル

set()文はオプションで。警告をできるだけ出したいときのオプションを記述する。
上記はgccをコンパイラで使うときになるべく多くの警告を出すための記述。

以上を書いたらcmakeでビルドする。

cmakeで一連のファイルが生成されると元のソースファイルとビルドファイルが混在してごちゃごちゃ
するので、ビルド用のディレクトリを専用に作っておいたほうがよい。

<br />

```
> mkdir build
```

<br />

ビルドディレクトリに移動し、ビルドディレクトリでcmakeコマンドを実行し実行ファイルを生成する。
ビルドディレクトリがカレントディレクトリで、コンパイル対象のcppソースファイルがカレントディレクトリ
からひとつ上の階層にある場合は、cmake .. とする。

```
> cd build
> cmake ..

```





